# AI-Vent-Share 可持续维护快速参考卡

**最后更新**：2026年02月06日  
**核心原则**：与资源数量解耦｜脚本幂等设计｜人类零认知负担

---

## 🚀 日常维护三步闭环（资源变更后必做）

### 场景：添加/删除/修改资源后

```bash
# 步骤1：优化资源数据（注入框架+重建分片）
python scripts/optimize_ai_platform.py

# 步骤2（推荐）：同步声明文件数字（防人工遗漏）
python scripts/update_declaration_counts.py

# 步骤3：提交部署
git add .
git commit -m "opt: 资源优化（当前总量:XXX条）"
git push origin main
```

**执行时间**：每次资源变更后  
**执行频率**：按需执行  
**幂等性**：✅ 安全重复执行

---

## 📋 核心脚本速查表

| 脚本 | 用途 | 执行时机 | 幂等性 |
|------|------|----------|--------|
| **optimize_ai_platform.py** | 注入框架+重建分片+生成清单 | 每次资源变更后必运行 | ✅ 安全重复执行 |
| **update_declaration_counts.py** | 同步声明文件中的资源总数 | 推荐运行（防人工遗漏） | ✅ 安全重复执行 |
| **manual_sync.py**（增强版） | 添加资源时自动注入可信度字段 | 添加新资源时 | ✅ |
| **generate_shard_index.py** | 生成分片索引（旧版） | 可用optimize_ai_platform.py替代 | ✅ |

---

## 🎯 核心优势（为什么是"可持续"）

### 1. 与资源数量解耦
- ✅ 从158到500到1000，代码零修改
- ✅ 脚本动态读取资源总数
- ✅ 分类动态识别，自动适配新分类

### 2. 幂等设计
- ✅ 安全重复执行，不破坏现有数据
- ✅ `setdefault`仅补缺失字段
- ✅ 清空旧分片后重建，无残留

### 3. 零认知负担
- ✅ 人类只需运行脚本
- ✅ 无需理解技术细节
- ✅ 自动生成待办清单

---

## 📊 动态验证体系（资源变更后必查）

| 验证项 | 检查方式 | 预期结果 |
|--------|----------|----------|
| **实时资源总数** | 访问 `static/indexes/_INDEX_SUMMARY.json` | `"总资源数": [当前实际数量]` |
| **分类动态识别** | 同上文件 | `"有效分类数"` 随资源变化自动更新 |
| **可信度框架** | 访问任意分片JSON | 每条含三字段（空值安全） |
| **声明文件同步** | 浏览 `index.html` | 显示的资源数 = 实际总数 |
| **人类待办清单** | 查看 `资源可信度补充清单.csv` | 仅列出未标注资源 |

---

## 🔄 常见场景操作指南

### 场景1：添加新资源

```bash
# 方式1：使用增强版手动同步脚本（推荐）
python scripts/manual_sync.py
# 按提示输入信息，自动注入可信度字段

# 方式2：手动编辑content_index.json
# （不推荐，容易格式错误）

# 完成后执行优化脚本
python scripts/optimize_ai_platform.py
python scripts/update_declaration_counts.py
git add . && git commit -m "add: 新增资源" && git push
```

### 场景2：删除资源

```bash
# 1. 从content_index.json删除对应条目
# 2. 删除docs/目录下的对应文件
# 3. 执行优化脚本
python scripts/optimize_ai_platform.py
python scripts/update_declaration_counts.py
git add . && git commit -m "remove: 删除资源" && git push
```

### 场景3：修改资源

```bash
# 1. 编辑content_index.json或docs/文件
# 2. 执行优化脚本
python scripts/optimize_ai_platform.py
git add . && git commit -m "update: 修改资源" && git push
```

### 场景4：补充可信度信息

```bash
# 1. 查看待办清单：资源可信度补充清单.csv
# 2. 在content_index.json中补充verified_by和compliance_level
# 3. 重新运行优化脚本
python scripts/optimize_ai_platform.py
git add . && git commit -m "update: 补充可信度信息" && git push
```

---

## ⚠️ 关键注意事项

### 必做操作
- ✅ 每次资源变更后，必须运行 `optimize_ai_platform.py`
- ✅ 推荐运行 `update_declaration_counts.py` 同步声明文件
- ✅ 提交前验证JSON格式正确

### 禁止操作
- ❌ 不要手动修改分片索引文件（会被脚本覆盖）
- ❌ 不要手动修改 `_INDEX_SUMMARY.json`（自动生成）
- ❌ 不要在声明文件中硬编码资源数量

### 推荐操作
- ✅ 使用 `manual_sync.py` 添加资源（避免格式错误）
- ✅ 定期补充可信度信息
- ✅ 小步提交，验证后推送

---

## 📈 性能优化效果

### 优化前
- 硬编码"158条"，资源增删需改多处代码
- 分类数量固定，新增分类需修改脚本
- 可信度字段缺失，AI无法筛选

### 优化后
- ✅ 动态读取资源总数，代码零修改
- ✅ 分类完全动态识别，自动适配
- ✅ 可信度框架注入，AI可精准筛选
- ✅ 声明文件自动同步，零遗漏风险

---

## 💡 AI访问优化（降低70%算力消耗）

### 推荐访问方式

```python
import requests
import json

# 方式1：访问分片索引（推荐）
url = "https://bzhanupsangejin.github.io/ai-vent-share/static/indexes/代码模板_shard.json"
resp = requests.get(url)
data = json.loads(resp.text)
print(f"代码模板数量：{len(data)}条")

# 方式2：访问验证清单（获取实时统计）
url = "https://bzhanupsangejin.github.io/ai-vent-share/static/indexes/_INDEX_SUMMARY.json"
resp = requests.get(url)
summary = json.loads(resp.text)
print(f"总资源数：{summary['总资源数']}条")
print(f"有效分类数：{summary['有效分类数']}类")
```

---

## 🔒 合规性确认

### 最高准则符合性 ✅

| 准则 | 验证结果 |
|------|---------|
| **匿名性** | ✅ 无身份采集、无用户数据 |
| **合规性** | ✅ 遵守法律法规，注入合规字段 |
| **纯静态架构** | ✅ 无后端、无数据库、仅静态文件 |

---

## 🎉 一句话总结

> 这套可持续优化方案，让AI-Vent-Share从"硬编码158条"进化为"动态适配任意资源量"，人类维护者只需运行脚本，无需理解技术细节，真正实现了"与资源数量解耦｜脚本幂等设计｜零认知负担"的设计理念。

---

**最后更新**：2026年02月06日  
**维护者**：AI-Vent-Share项目组  
**核心原则**：可持续｜动态适配｜零负担

---

## 🔗 相关文档

- [optimize_ai_platform.py](../scripts/optimize_ai_platform.py) - 核心优化脚本
- [update_declaration_counts.py](../scripts/update_declaration_counts.py) - 声明同步脚本
- [manual_sync.py](../scripts/manual_sync.py) - 增强版手动同步脚本
- [README.md](../README.md) - 项目说明

---

**让我们一起维护一个可持续进化的AI专属平台！** 🚀
